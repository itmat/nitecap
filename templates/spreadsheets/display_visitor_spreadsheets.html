{% extends "dashboard.html" %}
{% block dashboard_content %}

    <script>

        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        });

        $(document).ready(function() {
            let visitorSpreadsheetTableElement = $('#visitorSpreadsheetTable');

            let table = visitorSpreadsheetTableElement.DataTable({
                        order: [[ 5, 'desc' ]],
            });
        });
    </script>

    <div class="page-header">
        <h2>Visitor Spreadsheets</h2>
    </div>

    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <div class="badge badge-info">Notes</div>
            <div class="server-notes">
                {% for message in messages %}
                    <div>{{ message }}</div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    {% if errors %}
        <div id="error-indicator" class="badge badge-danger">Errors</div>
        <div class="server-errors">
            {% for error in errors %}
                <div>{{ error }}</div>
            {% endfor %}
        </div>
    {% endif %}


{% if user.spreadsheets %}
    <table id="visitorSpreadsheetTable" class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>ID</th>
                <th>Uploaded File</th>
                <th>Date Installed</th>
                <th>Name</th>
                <th>Current File Size</th>
                <th>Last Update</th>
            </tr>
        </thead>
        <tbody>
        {% for spreadsheet in user.spreadsheets %}
            <tr class="text-dark" id="spreadsheet_{{spreadsheet.id}}">
                <td>{{spreadsheet.id}}</td>
                <td>{{spreadsheet.original_filename}}</td>
                <td data-sort="{{spreadsheet.date_uploaded}}">
                    {{ momentjs(spreadsheet.date_uploaded).format('LLL') }}
                </td>
                <td>
                    {{spreadsheet.descriptive_name}}
                </td>
                <td>
                    1
                </td>
                <td data-sort="{{spreadsheet.last_access}}">
                    {{ momentjs(spreadsheet.last_access).format('LLL') }}
                </td>
            </tr>
        {% endfor %}
        </tbody>
        <!--
        <tfoot>
            <tr>
                <td>ID</td>
                <td>Uploaded File</td>
                <td>Date Installed</td>
                <td>Name</td>
                <td>Current File Size</td>
                <td>Last Update</td>
            </tr>
        </tfoot>
        -->
    </table>
{% endif %}

{%  endblock %}