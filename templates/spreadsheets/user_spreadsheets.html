{% extends "base.html" %}
{% block content %}

<script>

    $(function () {
        $('[data-toggle="tooltip"]').tooltip()
    })

</script>

<div class="page-header">
    <h1>Saved Spreadsheets</h1>
</div>

{% with messages = get_flashed_messages() %}
    {% if messages %}
        <div class="badge badge-info">Notes</div>
        <div class="server-notes">
            {% for message in messages %}
                <div>{{ message }}</div>
            {% endfor %}
        </div>
    {% endif %}
{% endwith %}

{% if errors %}
    <div class="badge badge-danger">Errors</div>
    <div class="server-errors">
        {% for error in errors %}
            <div>{{error}}</div>
        {% endfor %}
    </div>
{% endif %}


{% if user.spreadsheets %}
    <table id="colIdentityTable" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
        <tr>
            <td>Uploaded File</td>
            <td>Date Uploaded</td>
            <td>Days</td>
            <td>Timepoints</td>
            <td>Breakpoint</td>
            <td>Processed File</td>
            <td> </td>
        </tr>
        {% for spreadsheet in user.spreadsheets %}
            <tr>
                <td>{{spreadsheet.original_filename}}</td>
                <td>{{spreadsheet.date_uploaded.strftime("%d%b%Y, %H:%M") }}</td>
                <td>{{spreadsheet.days}}</td>
                <td>{{spreadsheet.timepoints}}</td>
                <td>{{spreadsheet.breakpoint}}</td>
                <td>
                    <a href="{{ url_for('spreadsheets.set_spreadsheet_breakpoint', spreadsheet_id = spreadsheet.id) }}">
                        <i class="fas fa-eye" data-toggle="tooltip" data-placement="top" title="View graphs"></i>
                    </a>
                    &nbsp;&nbsp;
                    <a href="{{ url_for('spreadsheets.download', spreadsheet_id = spreadsheet.id) }}">
                        <i class="fas fa-download" data-toggle="tooltip" data-placement="top" title="Download"></i>
                    </a>
                </td>
                <td><a href="{{ url_for('spreadsheets.delete', spreadsheet_id = spreadsheet.id) }}">
                    <i class="fas fa-trash" data-toggle="tooltip" data-placement="top" title="Delete"></i>
                </a></td>
            </tr>
        {% endfor %}
    </table>
{% endif %}

{% endblock %}